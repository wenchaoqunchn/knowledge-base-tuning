# Test & Development Playground

这个目录包含了整个项目的原始开发和实验代码，所有功能都是在这些Jupyter Notebook中进行探索、测试和迭代开发的。

## 目录内容

### 📓 Notebook文件

- **`main_convert2.ipynb`** - 主要的开发实验笔记本
  - 包含完整的文档处理流水线代码
  - 从基础格式转换到大模型增强的全流程
  - 包含HTML表格处理、PDF文档处理等核心功能
  - 大模型API集成和自定义索引生成

- **`convert.ipynb`** - 辅助转换工具实验笔记本
  - 各种文档转换方法的实验代码
  - LibreOffice、PDFMiner、PyMuPDF等工具的测试
  - 表格提取和格式化的多种方案对比
  - HTML处理和优化的实验代码

## ⚠️ 注意事项

### 代码特点
- **实验性质**: 这些代码是研究和开发过程的记录，包含大量试验性代码
- **冗余内容**: 包含很多重复的实验、注释掉的代码和调试片段
- **迭代演进**: 可以看到功能从简单到复杂的演进过程
- **未优化**: 代码结构未经优化，存在重复和低效的部分

### 与生产代码的关系
1. **原型开发**: 所有 `src/` 目录下的模块化代码都是基于这些notebook中的实验提炼而来
2. **功能验证**: 核心算法和处理逻辑在这里得到验证和调试
3. **方案比较**: 可以看到多种技术方案的尝试和比较过程

## 🔍 主要实验内容

### 文档转换实验
- **多格式支持**: DOC/DOCX/PDF/HTML/XLS/XLSX等格式的转换尝试
- **工具对比**: LibreOffice vs 永中Office vs PyMuPDF vs PDFPlumber等工具的效果比较
- **质量优化**: 转换质量和表格保真度的改进实验

### 表格处理实验
- **HTML表格清理**: BeautifulSoup处理复杂表格结构
- **PDF表格提取**: pdfplumber和camelot的表格提取效果对比
- **格式标准化**: 统一的Markdown表格输出格式实验

### 大模型集成实验
- **API调用**: 各种大模型API的集成测试
- **提示词优化**: 不同提示词对输出质量的影响
- **批处理优化**: 大批量文档的处理策略

### 性能优化实验
- **并发处理**: ThreadPoolExecutor的应用
- **内存管理**: 大文件处理的内存优化
- **错误处理**: 各种异常情况的处理策略

## 📖 如何使用这些代码

### 学习参考
```python
# 可以参考核心处理逻辑
# 例如HTML表格简化函数
def simplify_html_table(html_content, compact_level=0):
    # 实际的处理逻辑
    pass
```

### 功能测试
```python
# 可以直接运行某些cell进行单元测试
# 例如PDF转换测试
pdf_processor.pdf_doc_to_markdown(pdf_path, output_path)
```

### 算法验证
```python
# 可以验证各种转换算法的效果
# 例如表格格式化
def format_table(table):
    df = pd.DataFrame(table)
    # 处理逻辑...
    return md_table
```

## 🔄 从实验到生产

这些notebook中的代码经过以下步骤转化为生产代码：

1. **功能提取**: 从实验代码中提取核心功能
2. **代码重构**: 消除冗余，优化结构
3. **模块化**: 按功能划分为独立模块
4. **错误处理**: 添加完善的异常处理
5. **文档完善**: 添加详细的文档和类型注解
6. **测试验证**: 确保功能的正确性和稳定性

## 💡 开发心得

### 技术选型经验
- **文档转换**: LibreOffice在批量处理方面表现最佳
- **表格提取**: pdfplumber + camelot组合效果最好
- **HTML处理**: BeautifulSoup的灵活性最适合复杂表格
- **大模型集成**: 需要考虑API限制和错误重试机制

### 性能优化经验
- **分批处理**: 避免内存溢出
- **并发控制**: 合理的线程数量平衡效率和稳定性
- **缓存机制**: 避免重复转换已处理的文件

### 质量提升经验
- **多轮验证**: 关键功能需要在不同文档上反复测试
- **用户反馈**: 根据实际使用效果调整算法参数
- **持续迭代**: 根据新需求不断优化和扩展功能

---

**注意**: 这些代码仅供开发参考，生产环境请使用 `src/` 目录下的模块化代码。
